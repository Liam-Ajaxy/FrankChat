const a0_0x89bb7b=a0_0x2902;(function(_0x10516d,_0x42c6ff){const _0x19ab7e=a0_0x2902,_0x348f97=_0x10516d();while(!![]){try{const _0x59ab4c=-parseInt(_0x19ab7e(0x288))/0x1*(parseInt(_0x19ab7e(0x221))/0x2)+parseInt(_0x19ab7e(0x16a))/0x3+-parseInt(_0x19ab7e(0x291))/0x4*(parseInt(_0x19ab7e(0x244))/0x5)+-parseInt(_0x19ab7e(0x1e8))/0x6*(-parseInt(_0x19ab7e(0x16b))/0x7)+parseInt(_0x19ab7e(0x1f2))/0x8+parseInt(_0x19ab7e(0x151))/0x9*(parseInt(_0x19ab7e(0x27c))/0xa)+parseInt(_0x19ab7e(0x160))/0xb;if(_0x59ab4c===_0x42c6ff)break;else _0x348f97['push'](_0x348f97['shift']());}catch(_0x4fc466){_0x348f97['push'](_0x348f97['shift']());}}}(a0_0x5d92,0x6f4f3));const state={'token':localStorage[a0_0x89bb7b(0x210)](a0_0x89bb7b(0x286))||null,'user':JSON['parse'](localStorage[a0_0x89bb7b(0x210)](a0_0x89bb7b(0x18f))||a0_0x89bb7b(0x28c)),'conversations':[],'currentConversation':null,'currentView':a0_0x89bb7b(0x198),'users':[],'messages':{},'socket':null,'typingTimeouts':{}},isDev=window[a0_0x89bb7b(0x270)][a0_0x89bb7b(0x240)]==='localhost'||window[a0_0x89bb7b(0x270)][a0_0x89bb7b(0x240)]===a0_0x89bb7b(0x22a),API_URL=isDev?a0_0x89bb7b(0x243):a0_0x89bb7b(0x16c),SOCKET_URL=isDev?'http://localhost:3000':a0_0x89bb7b(0x23d);function validateUsername(_0x1e38cd){const _0x342df5=a0_0x89bb7b;if(_0x1e38cd['length']<0x3||_0x1e38cd[_0x342df5(0x28e)]>0x14)return{'valid':![],'error':_0x342df5(0x228)};const _0xc9fa33=/^[a-zA-Z0-9_-]+$/;if(!_0xc9fa33[_0x342df5(0x1b3)](_0x1e38cd))return{'valid':![],'error':_0x342df5(0x232)};if(!/^[a-zA-Z0-9]/[_0x342df5(0x1b3)](_0x1e38cd))return{'valid':![],'error':_0x342df5(0x284)};return{'valid':!![]};}document['addEventListener'](a0_0x89bb7b(0x1b6),()=>{const _0x5521d8=a0_0x89bb7b;state['token']&&state[_0x5521d8(0x18f)]&&initializeChat();});function showLoading(_0x49d059=a0_0x89bb7b(0x241)){const _0x99af58=a0_0x89bb7b;let _0x3b73f0=document['getElementById']('loadingOverlay');if(!_0x3b73f0){_0x3b73f0=document[_0x99af58(0x276)](_0x99af58(0x168)),_0x3b73f0['id']=_0x99af58(0x215),_0x3b73f0['style'][_0x99af58(0x1cb)]=_0x99af58(0x184),_0x3b73f0[_0x99af58(0x19d)]=_0x99af58(0x27f)+_0x49d059+_0x99af58(0x212);if(!document[_0x99af58(0x1c2)](_0x99af58(0x289))){const _0x54a941=document['createElement'](_0x99af58(0x1d1));_0x54a941['id']=_0x99af58(0x289),_0x54a941['textContent']=_0x99af58(0x1ce),document[_0x99af58(0x1bc)]['appendChild'](_0x54a941);}document[_0x99af58(0x26d)][_0x99af58(0x28a)](_0x3b73f0);}else _0x3b73f0[_0x99af58(0x1d1)][_0x99af58(0x25d)]='flex',document['getElementById'](_0x99af58(0x194))['textContent']=_0x49d059;}function hideLoading(){const _0x4647fe=a0_0x89bb7b,_0x8b4240=document[_0x4647fe(0x1c2)]('loadingOverlay');_0x8b4240&&(_0x8b4240[_0x4647fe(0x1d1)]['display']=_0x4647fe(0x227));}function showAuthModal(_0x803548){const _0x1667b1=a0_0x89bb7b,_0x41cc67=document[_0x1667b1(0x1c2)](_0x1667b1(0x1b9));_0x41cc67[_0x1667b1(0x24c)][_0x1667b1(0x162)]('active'),switchAuthTab(_0x803548);}function closeAuthModal(){const _0x4c310d=a0_0x89bb7b;document[_0x4c310d(0x1c2)](_0x4c310d(0x1b9))['classList'][_0x4c310d(0x193)](_0x4c310d(0x1dd)),document[_0x4c310d(0x1c2)](_0x4c310d(0x23c))[_0x4c310d(0x24c)][_0x4c310d(0x193)](_0x4c310d(0x1dd)),document['getElementById'](_0x4c310d(0x1e7))['classList']['remove']('active'),document[_0x4c310d(0x1c2)](_0x4c310d(0x201))['reset'](),document['getElementById'](_0x4c310d(0x1d4))[_0x4c310d(0x283)]();}function switchAuthTab(_0x5fe373){const _0x2ef510=a0_0x89bb7b,_0x4cbe62=document[_0x2ef510(0x1c2)](_0x2ef510(0x25f)),_0x30b993=document['getElementById'](_0x2ef510(0x166)),_0x29007d=document[_0x2ef510(0x1c2)](_0x2ef510(0x201)),_0x288aeb=document[_0x2ef510(0x1c2)](_0x2ef510(0x1d4));_0x5fe373===_0x2ef510(0x251)?(_0x4cbe62[_0x2ef510(0x24c)][_0x2ef510(0x162)](_0x2ef510(0x1dd)),_0x30b993[_0x2ef510(0x24c)][_0x2ef510(0x193)](_0x2ef510(0x1dd)),_0x29007d[_0x2ef510(0x1d1)][_0x2ef510(0x25d)]='block',_0x288aeb[_0x2ef510(0x1d1)][_0x2ef510(0x25d)]=_0x2ef510(0x227)):(_0x4cbe62['classList']['remove'](_0x2ef510(0x1dd)),_0x30b993[_0x2ef510(0x24c)][_0x2ef510(0x162)](_0x2ef510(0x1dd)),_0x29007d[_0x2ef510(0x1d1)]['display']=_0x2ef510(0x227),_0x288aeb[_0x2ef510(0x1d1)][_0x2ef510(0x25d)]=_0x2ef510(0x1cd));}document['getElementById'](a0_0x89bb7b(0x201))[a0_0x89bb7b(0x1e0)]('submit',async _0x1e3bee=>{const _0x482e64=a0_0x89bb7b;_0x1e3bee['preventDefault']();const _0x14747d=document[_0x482e64(0x1c2)](_0x482e64(0x202))['value']['trim'](),_0x49c5e8=document[_0x482e64(0x1c2)](_0x482e64(0x254))[_0x482e64(0x179)],_0x5ede87=document['getElementById']('loginError');showLoading(_0x482e64(0x150));try{const _0xa5f418=await fetch(API_URL+_0x482e64(0x211),{'method':_0x482e64(0x285),'headers':{'Content-Type':'application/json'},'body':JSON[_0x482e64(0x1b4)]({'username':_0x14747d,'password':_0x49c5e8})}),_0x27d59a=await _0xa5f418[_0x482e64(0x1fa)]();if(!_0xa5f418['ok']){hideLoading(),_0x5ede87['textContent']=_0x27d59a[_0x482e64(0x14d)]||_0x482e64(0x242),_0x5ede87[_0x482e64(0x24c)][_0x482e64(0x162)]('active');return;}state[_0x482e64(0x286)]=_0x27d59a[_0x482e64(0x286)],state['user']=_0x27d59a[_0x482e64(0x18f)],localStorage[_0x482e64(0x24a)](_0x482e64(0x286),_0x27d59a[_0x482e64(0x286)]),localStorage['setItem'](_0x482e64(0x18f),JSON[_0x482e64(0x1b4)](_0x27d59a[_0x482e64(0x18f)])),closeAuthModal(),await initializeChat(),hideLoading();}catch(_0x540575){hideLoading(),_0x5ede87[_0x482e64(0x22e)]=_0x482e64(0x1b0),_0x5ede87[_0x482e64(0x24c)]['add'](_0x482e64(0x1dd));}}),document['getElementById']('signupForm')['addEventListener']('submit',async _0x4718a5=>{const _0x24b2cd=a0_0x89bb7b;_0x4718a5[_0x24b2cd(0x1dc)]();const _0x2707c1=document[_0x24b2cd(0x1c2)]('signupUsername')['value']['trim'](),_0x16d13e=document[_0x24b2cd(0x1c2)](_0x24b2cd(0x1df))['value'],_0x574f9e=document[_0x24b2cd(0x1c2)]('signupPasswordConfirm')[_0x24b2cd(0x179)],_0x565c81=document[_0x24b2cd(0x1c2)]('signupError'),_0x581da6=validateUsername(_0x2707c1);if(!_0x581da6[_0x24b2cd(0x1e3)]){_0x565c81[_0x24b2cd(0x22e)]=_0x581da6[_0x24b2cd(0x14d)],_0x565c81[_0x24b2cd(0x24c)][_0x24b2cd(0x162)](_0x24b2cd(0x1dd));return;}if(_0x16d13e!==_0x574f9e){_0x565c81[_0x24b2cd(0x22e)]=_0x24b2cd(0x180),_0x565c81['classList'][_0x24b2cd(0x162)]('active');return;}showLoading(_0x24b2cd(0x1c9));try{const _0x2f9ce8=await fetch(API_URL+_0x24b2cd(0x278),{'method':_0x24b2cd(0x285),'headers':{'Content-Type':_0x24b2cd(0x247)},'body':JSON[_0x24b2cd(0x1b4)]({'username':_0x2707c1,'password':_0x16d13e})}),_0x4ce782=await _0x2f9ce8[_0x24b2cd(0x1fa)]();if(!_0x2f9ce8['ok']){hideLoading(),_0x565c81[_0x24b2cd(0x22e)]=_0x4ce782[_0x24b2cd(0x14d)]||_0x24b2cd(0x1a4),_0x565c81[_0x24b2cd(0x24c)][_0x24b2cd(0x162)](_0x24b2cd(0x1dd));return;}state[_0x24b2cd(0x286)]=_0x4ce782[_0x24b2cd(0x286)],state[_0x24b2cd(0x18f)]=_0x4ce782[_0x24b2cd(0x18f)],localStorage['setItem'](_0x24b2cd(0x286),_0x4ce782['token']),localStorage[_0x24b2cd(0x24a)](_0x24b2cd(0x18f),JSON[_0x24b2cd(0x1b4)](_0x4ce782[_0x24b2cd(0x18f)])),closeAuthModal(),await initializeChat(),hideLoading();}catch(_0x2e47bb){hideLoading(),_0x565c81[_0x24b2cd(0x22e)]=_0x24b2cd(0x1b0),_0x565c81[_0x24b2cd(0x24c)][_0x24b2cd(0x162)](_0x24b2cd(0x1dd));}});async function initializeChat(){const _0x22022f=a0_0x89bb7b;showLoading('Setting\x20up\x20your\x20chat...'),document[_0x22022f(0x1c2)](_0x22022f(0x1c5))['style'][_0x22022f(0x25d)]='none',document[_0x22022f(0x1c2)](_0x22022f(0x176))[_0x22022f(0x1d1)][_0x22022f(0x25d)]=_0x22022f(0x16d);const _0x35cec7=document['getElementById'](_0x22022f(0x1ed)),_0xb15315=document[_0x22022f(0x1c2)](_0x22022f(0x15d));if(_0x35cec7)_0x35cec7[_0x22022f(0x22e)]=state[_0x22022f(0x18f)]['username'];if(_0xb15315)_0xb15315[_0x22022f(0x22e)]=state[_0x22022f(0x18f)][_0x22022f(0x22f)];const _0x305cfe=document['getElementById'](_0x22022f(0x171));if(_0x305cfe)_0x305cfe[_0x22022f(0x22e)]=state['user'][_0x22022f(0x22f)];initializeSocket(),await loadConversations(),await loadUsers(),updateUnreadBadges();if(state['user'][_0x22022f(0x238)]&&state['user']['settings'][_0x22022f(0x15e)]===_0x22022f(0x183)){document['documentElement']['setAttribute'](_0x22022f(0x1c6),_0x22022f(0x183));const _0x334617=document[_0x22022f(0x1c2)](_0x22022f(0x17d));if(_0x334617)_0x334617['value']=_0x22022f(0x183);}const _0x2e93fa=document[_0x22022f(0x1c2)](_0x22022f(0x165));_0x2e93fa&&state['user'][_0x22022f(0x238)]&&(_0x2e93fa[_0x22022f(0x1a6)]=state[_0x22022f(0x18f)][_0x22022f(0x238)][_0x22022f(0x161)]),hideLoading();}function initializeSocket(){const _0xe2909c=a0_0x89bb7b;state[_0xe2909c(0x154)]=io(SOCKET_URL,{'auth':{'token':state[_0xe2909c(0x286)]}}),state['socket']['on']('connect',()=>{const _0x980c82=_0xe2909c;console[_0x980c82(0x1f1)]('✅\x20Connected\x20to\x20socket');}),state[_0xe2909c(0x154)]['on'](_0xe2909c(0x249),_0x564942=>{handleNewMessage(_0x564942);}),state[_0xe2909c(0x154)]['on']('userStatusChange',({userId:_0x376bb0,status:_0x1a1f10,lastSeen:_0x370cea})=>{updateUserStatus(_0x376bb0,_0x1a1f10,_0x370cea);}),state[_0xe2909c(0x154)]['on'](_0xe2909c(0x18c),({userId:_0x1e68e0,username:_0x229622,conversationId:_0x2947e3,isTyping:_0x4e8aff})=>{handleTypingIndicator(_0x1e68e0,_0x229622,_0x2947e3,_0x4e8aff);}),state[_0xe2909c(0x154)]['on'](_0xe2909c(0x23e),_0x56cce8=>{addConversation(_0x56cce8);}),state[_0xe2909c(0x154)]['on'](_0xe2909c(0x28b),({conversationId:_0x438141,userId:_0x12ef8d})=>{markMessagesAsRead(_0x438141,_0x12ef8d);});}async function loadConversations(){const _0x1b9a99=a0_0x89bb7b;try{const _0x1c06ae=await fetch(API_URL+_0x1b9a99(0x1ac),{'headers':{'Authorization':'Bearer\x20'+state['token']}});if(!_0x1c06ae['ok'])throw new Error(_0x1b9a99(0x256));state[_0x1b9a99(0x1a5)]=await _0x1c06ae[_0x1b9a99(0x1fa)](),renderConversations();}catch(_0x5f48a8){console[_0x1b9a99(0x14d)](_0x1b9a99(0x167),_0x5f48a8);}}function renderConversations(){const _0x3f5517=a0_0x89bb7b,_0x1dff47=document['getElementById'](_0x3f5517(0x1ab)),_0xf26a59=document['getElementById'](_0x3f5517(0x188)),_0xc4c978=_0xf26a59?_0xf26a59['value']['toLowerCase']():'';let _0x3f86b9=state[_0x3f5517(0x1a5)][_0x3f5517(0x265)](_0x3cd916=>{const _0x37a0e1=_0x3f5517,_0x50e5e5=getConversationName(_0x3cd916)[_0x37a0e1(0x1ca)](),_0xd94a8c=_0x50e5e5[_0x37a0e1(0x220)](_0xc4c978);if(!_0xd94a8c)return![];if(state[_0x37a0e1(0x1c4)]===_0x37a0e1(0x21d))return _0x3cd916[_0x37a0e1(0x185)]==='group';else{if(state['currentView']===_0x37a0e1(0x195)){const _0x29a3d5=_0x3cd916['unreadCount']?.[state['user']['id']]||0x0;return _0x29a3d5>0x0;}}return!![];});const _0x37dd03=_0x1dff47[_0x3f5517(0x1fe)](_0x3f5517(0x19a));if(_0x37dd03)_0x37dd03[_0x3f5517(0x193)]();if(_0x3f86b9[_0x3f5517(0x28e)]===0x0){let _0x3be7e3='No\x20conversations\x20yet';if(state[_0x3f5517(0x1c4)]==='groups')_0x3be7e3=_0x3f5517(0x164);if(state[_0x3f5517(0x1c4)]==='unread')_0x3be7e3=_0x3f5517(0x17c);_0x1dff47['innerHTML']=_0x3f5517(0x231)+_0x3be7e3+_0x3f5517(0x15a);return;}_0x1dff47['innerHTML']=_0x3f86b9['map'](_0x435b77=>{const _0x1ebe68=_0x3f5517,_0x4ba400=getConversationName(_0x435b77),_0x480101=getConversationAvatar(_0x435b77),_0x29f5e0=_0x435b77[_0x1ebe68(0x224)],_0x174300=_0x435b77['unreadCount']?.[state[_0x1ebe68(0x18f)]['id']]||0x0,_0x509416=state[_0x1ebe68(0x175)]?.[_0x1ebe68(0x1c0)]===_0x435b77[_0x1ebe68(0x1c0)];let _0x7f7d4='No\x20messages\x20yet';if(_0x29f5e0){const _0x4ca5c1=escapeHtml(_0x29f5e0[_0x1ebe68(0x261)]);_0x7f7d4=_0x4ca5c1[_0x1ebe68(0x28e)]>0x28?_0x4ca5c1['substring'](0x0,0x28)+'...':_0x4ca5c1;}return _0x1ebe68(0x153)+(_0x509416?_0x1ebe68(0x1dd):'')+_0x1ebe68(0x216)+_0x435b77[_0x1ebe68(0x1c0)]+_0x1ebe68(0x1e1)+_0x480101+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22conversation-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22conversation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22conversation-name\x22>'+_0x4ba400+_0x1ebe68(0x19e)+(_0x29f5e0?formatTime(_0x29f5e0[_0x1ebe68(0x1b2)]):'')+_0x1ebe68(0x237)+_0x7f7d4+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x174300>0x0?_0x1ebe68(0x22b)+_0x174300+'</div>':'')+_0x1ebe68(0x25e);})[_0x3f5517(0x24d)](''),updateUnreadBadges();}function getConversationName(_0x140387){const _0x47e6c4=a0_0x89bb7b;if(_0x140387[_0x47e6c4(0x185)]===_0x47e6c4(0x280))return _0x140387[_0x47e6c4(0x1cc)]||_0x47e6c4(0x1e5);const _0x2685fe=_0x140387[_0x47e6c4(0x255)][_0x47e6c4(0x27d)](_0x481ccf=>_0x481ccf[_0x47e6c4(0x1c0)]!==state[_0x47e6c4(0x18f)]['id']);return _0x2685fe?_0x2685fe[_0x47e6c4(0x158)]:_0x47e6c4(0x17e);}function getConversationAvatar(_0x588747){const _0x597e41=a0_0x89bb7b;if(_0x588747[_0x597e41(0x185)]===_0x597e41(0x280))return _0x588747[_0x597e41(0x1cc)]?_0x588747[_0x597e41(0x1cc)]['substring'](0x0,0x2)['toUpperCase']():'GC';const _0x4b2fc5=_0x588747['participants']['find'](_0x15c0cf=>_0x15c0cf[_0x597e41(0x1c0)]!==state[_0x597e41(0x18f)]['id']);return _0x4b2fc5?_0x4b2fc5[_0x597e41(0x22f)]:'U';}function addConversation(_0x124b4a){const _0x2557f0=a0_0x89bb7b,_0x841064=state[_0x2557f0(0x1a5)]['find'](_0x4c5dd1=>_0x4c5dd1[_0x2557f0(0x1c0)]===_0x124b4a[_0x2557f0(0x1c0)]);!_0x841064&&(state['conversations'][_0x2557f0(0x253)](_0x124b4a),renderConversations());}function updateUnreadBadges(){const _0x12f882=a0_0x89bb7b,_0x39488c=state[_0x12f882(0x1a5)]['reduce']((_0x3a6169,_0x4adfa2)=>{return _0x3a6169+(_0x4adfa2['unreadCount']?.[state['user']['id']]||0x0);},0x0),_0xc8abaa=state[_0x12f882(0x1a5)][_0x12f882(0x265)](_0x3cf805=>_0x3cf805[_0x12f882(0x185)]===_0x12f882(0x280))[_0x12f882(0x21a)]((_0x238fd7,_0x112e89)=>{const _0x2ec0a7=_0x12f882;return _0x238fd7+(_0x112e89[_0x2ec0a7(0x157)]?.[state[_0x2ec0a7(0x18f)]['id']]||0x0);},0x0),_0x51cea5=document['getElementById'](_0x12f882(0x17a)),_0x193d47=document[_0x12f882(0x1c2)](_0x12f882(0x1ea)),_0xff7fec=document[_0x12f882(0x1c2)]('unreadBadge');_0x51cea5&&(_0x39488c>0x0?(_0x51cea5[_0x12f882(0x22e)]=_0x39488c,_0x51cea5[_0x12f882(0x1d1)][_0x12f882(0x25d)]=_0x12f882(0x225)):_0x51cea5['style'][_0x12f882(0x25d)]='none'),_0x193d47&&(_0xc8abaa>0x0?(_0x193d47[_0x12f882(0x22e)]=_0xc8abaa,_0x193d47[_0x12f882(0x1d1)][_0x12f882(0x25d)]=_0x12f882(0x225)):_0x193d47[_0x12f882(0x1d1)][_0x12f882(0x25d)]='none'),_0xff7fec&&(_0x39488c>0x0?(_0xff7fec[_0x12f882(0x22e)]=_0x39488c,_0xff7fec[_0x12f882(0x1d1)][_0x12f882(0x25d)]=_0x12f882(0x225)):_0xff7fec['style'][_0x12f882(0x25d)]=_0x12f882(0x227));}function switchView(_0x140798){const _0x2c4c26=a0_0x89bb7b;state[_0x2c4c26(0x1c4)]=_0x140798,renderConversations(),document[_0x2c4c26(0x173)]('.nav-item')['forEach'](_0x523f2d=>{const _0x26dcab=_0x2c4c26;_0x523f2d[_0x26dcab(0x24c)][_0x26dcab(0x193)](_0x26dcab(0x1dd));});const _0x42e4b9=document[_0x2c4c26(0x1fe)](_0x2c4c26(0x281)+_0x140798+_0x2c4c26(0x204));if(_0x42e4b9)_0x42e4b9[_0x2c4c26(0x24c)][_0x2c4c26(0x162)](_0x2c4c26(0x1dd));}const searchInput=document[a0_0x89bb7b(0x1c2)]('searchConversations');searchInput&&searchInput['addEventListener']('input',renderConversations);async function openConversation(_0x41aae7){const _0x4f05f8=a0_0x89bb7b,_0x4ec4b3=state[_0x4f05f8(0x1a5)][_0x4f05f8(0x27d)](_0x27b170=>_0x27b170[_0x4f05f8(0x1c0)]===_0x41aae7);if(!_0x4ec4b3)return;state[_0x4f05f8(0x175)]=_0x4ec4b3;if(window[_0x4f05f8(0x1d5)]<=0x300){const _0xc2f0ea=document[_0x4f05f8(0x1c2)](_0x4f05f8(0x230));if(_0xc2f0ea)_0xc2f0ea[_0x4f05f8(0x24c)][_0x4f05f8(0x162)]('hidden');}const _0x352abb=document[_0x4f05f8(0x1fe)]('.chat-placeholder'),_0xc99e32=document[_0x4f05f8(0x1c2)](_0x4f05f8(0x1ec));if(_0x352abb)_0x352abb[_0x4f05f8(0x1d1)][_0x4f05f8(0x25d)]=_0x4f05f8(0x227);if(_0xc99e32)_0xc99e32[_0x4f05f8(0x1d1)][_0x4f05f8(0x25d)]=_0x4f05f8(0x225);const _0x391331=getConversationName(_0x4ec4b3),_0x1f87d1=getConversationAvatar(_0x4ec4b3),_0x2772c0=document[_0x4f05f8(0x1c2)](_0x4f05f8(0x181)),_0x4048de=document[_0x4f05f8(0x1c2)](_0x4f05f8(0x14c)),_0x596a9c=document[_0x4f05f8(0x1c2)]('infoName'),_0x1c8c1b=document[_0x4f05f8(0x1c2)](_0x4f05f8(0x191));if(_0x2772c0)_0x2772c0['textContent']=_0x391331;if(_0x4048de)_0x4048de[_0x4f05f8(0x22e)]=_0x1f87d1;if(_0x596a9c)_0x596a9c['textContent']=_0x391331;if(_0x1c8c1b)_0x1c8c1b['textContent']=_0x1f87d1;const _0x74918=document[_0x4f05f8(0x1c2)](_0x4f05f8(0x24f)),_0x7226f1=document[_0x4f05f8(0x1c2)](_0x4f05f8(0x26c));if(_0x4ec4b3[_0x4f05f8(0x185)]===_0x4f05f8(0x17f)){const _0x433b19=_0x4ec4b3[_0x4f05f8(0x255)][_0x4f05f8(0x27d)](_0x305e4c=>_0x305e4c[_0x4f05f8(0x1c0)]!==state[_0x4f05f8(0x18f)]['id']),_0x533c4f=_0x433b19[_0x4f05f8(0x1d7)]===_0x4f05f8(0x156)?_0x4f05f8(0x207):'Last\x20seen\x20'+formatTime(_0x433b19[_0x4f05f8(0x245)]);if(_0x74918)_0x74918[_0x4f05f8(0x22e)]=_0x533c4f;if(_0x7226f1)_0x7226f1[_0x4f05f8(0x22e)]=_0x533c4f;}else{const _0xe6691f=_0x4ec4b3[_0x4f05f8(0x255)]['length']+_0x4f05f8(0x155);if(_0x74918)_0x74918[_0x4f05f8(0x22e)]=_0xe6691f;if(_0x7226f1)_0x7226f1[_0x4f05f8(0x22e)]=_0xe6691f;}renderParticipants(_0x4ec4b3),renderConversations();const _0x290bf1=document[_0x4f05f8(0x1c2)](_0x4f05f8(0x209));_0x290bf1&&(_0x290bf1[_0x4f05f8(0x19d)]=_0x4f05f8(0x1cf)),await loadMessages(_0x41aae7),await markConversationAsRead(_0x41aae7);}async function loadMessages(_0x40c464){const _0x36336d=a0_0x89bb7b;try{const _0x2de7dc=await fetch(API_URL+_0x36336d(0x217)+_0x40c464,{'headers':{'Authorization':'Bearer\x20'+state['token']}});if(!_0x2de7dc['ok'])throw new Error('Failed\x20to\x20load\x20messages');const _0x73ac63=await _0x2de7dc[_0x36336d(0x1fa)]();state[_0x36336d(0x275)][_0x40c464]=_0x73ac63,renderMessages(_0x40c464);}catch(_0x29db59){console[_0x36336d(0x14d)](_0x36336d(0x1d3),_0x29db59);const _0x24a438=document[_0x36336d(0x1c2)](_0x36336d(0x209));_0x24a438&&(_0x24a438[_0x36336d(0x19d)]=_0x36336d(0x23a));}}function renderMessages(_0x33d4df){const _0x4b0d1a=a0_0x89bb7b;if(state['currentConversation']?.[_0x4b0d1a(0x1c0)]!==_0x33d4df)return;const _0x44c776=document[_0x4b0d1a(0x1c2)]('messagesContainer');if(!_0x44c776)return;const _0x235316=state['messages'][_0x33d4df]||[];_0x44c776[_0x4b0d1a(0x19d)]=_0x235316[_0x4b0d1a(0x222)](_0x38f913=>{const _0x1a2d47=_0x4b0d1a,_0x558e40=_0x38f913[_0x1a2d47(0x1aa)][_0x1a2d47(0x1c0)]===state[_0x1a2d47(0x18f)]['id'],_0x1a50d2=formatTime(_0x38f913['createdAt']);return _0x1a2d47(0x18d)+(_0x558e40?_0x1a2d47(0x1a8):'')+_0x1a2d47(0x172)+_0x38f913[_0x1a2d47(0x1aa)][_0x1a2d47(0x22f)]+_0x1a2d47(0x1d2)+(!_0x558e40?_0x1a2d47(0x28d)+_0x38f913[_0x1a2d47(0x1aa)][_0x1a2d47(0x158)]+_0x1a2d47(0x15a):'')+_0x1a2d47(0x197)+escapeHtml(_0x38f913[_0x1a2d47(0x14f)])+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-time\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1a50d2+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x558e40&&_0x38f913[_0x1a2d47(0x200)][_0x1a2d47(0x28e)]>0x1?_0x1a2d47(0x263):'')+_0x1a2d47(0x20a);})[_0x4b0d1a(0x24d)](''),_0x44c776[_0x4b0d1a(0x1a9)]=_0x44c776[_0x4b0d1a(0x266)];}function a0_0x2902(_0x22ca22,_0x31cbf5){const _0x5d9245=a0_0x5d92();return a0_0x2902=function(_0x290299,_0x1325e9){_0x290299=_0x290299-0x14c;let _0xa282a4=_0x5d9245[_0x290299];return _0xa282a4;},a0_0x2902(_0x22ca22,_0x31cbf5);}function handleNewMessage(_0x2bfe09){const _0x3323e1=a0_0x89bb7b,_0x2bb770=_0x2bfe09[_0x3323e1(0x18a)];!state['messages'][_0x2bb770]&&(state[_0x3323e1(0x275)][_0x2bb770]=[]);state[_0x3323e1(0x275)][_0x2bb770][_0x3323e1(0x22c)](_0x2bfe09);const _0x45c171=state['conversations'][_0x3323e1(0x27d)](_0x2c0af5=>_0x2c0af5[_0x3323e1(0x1c0)]===_0x2bb770);if(_0x45c171){_0x45c171[_0x3323e1(0x224)]={'text':_0x2bfe09['content'],'sender':_0x2bfe09[_0x3323e1(0x1aa)][_0x3323e1(0x1c0)],'time':_0x2bfe09[_0x3323e1(0x27a)]};if(state['currentConversation']?.[_0x3323e1(0x1c0)]!==_0x2bb770&&_0x2bfe09[_0x3323e1(0x1aa)][_0x3323e1(0x1c0)]!==state[_0x3323e1(0x18f)]['id']){if(!_0x45c171[_0x3323e1(0x157)])_0x45c171[_0x3323e1(0x157)]={};_0x45c171[_0x3323e1(0x157)][state['user']['id']]=(_0x45c171[_0x3323e1(0x157)][state['user']['id']]||0x0)+0x1;}state['conversations']=[_0x45c171,...state['conversations']['filter'](_0x33448e=>_0x33448e[_0x3323e1(0x1c0)]!==_0x2bb770)],renderConversations();}state[_0x3323e1(0x175)]?.[_0x3323e1(0x1c0)]===_0x2bb770&&(renderMessages(_0x2bb770),markConversationAsRead(_0x2bb770));}const messageForm=document[a0_0x89bb7b(0x1c2)](a0_0x89bb7b(0x246));messageForm&&messageForm[a0_0x89bb7b(0x1e0)](a0_0x89bb7b(0x250),async _0x3a033e=>{const _0x3cac47=a0_0x89bb7b;_0x3a033e[_0x3cac47(0x1dc)]();const _0x33ff6c=document[_0x3cac47(0x1c2)]('messageInput'),_0x32983c=document['getElementById'](_0x3cac47(0x248));if(!_0x33ff6c||!_0x32983c)return;const _0x3e723f=_0x33ff6c[_0x3cac47(0x179)]['trim']();if(!_0x3e723f||!state[_0x3cac47(0x175)])return;_0x32983c[_0x3cac47(0x1e2)]=!![];const _0x2374f7=_0x32983c['innerHTML'];_0x32983c[_0x3cac47(0x19d)]=_0x3cac47(0x234);try{const _0x427e6d=await fetch(API_URL+'/messages',{'method':_0x3cac47(0x285),'headers':{'Content-Type':_0x3cac47(0x247),'Authorization':'Bearer\x20'+state[_0x3cac47(0x286)]},'body':JSON[_0x3cac47(0x1b4)]({'conversationId':state['currentConversation'][_0x3cac47(0x1c0)],'content':_0x3e723f})});if(!_0x427e6d['ok'])throw new Error('Failed\x20to\x20send\x20message');_0x33ff6c[_0x3cac47(0x179)]='',state[_0x3cac47(0x154)]&&state[_0x3cac47(0x154)][_0x3cac47(0x1af)]('typing',{'conversationId':state[_0x3cac47(0x175)]['_id'],'isTyping':![]});}catch(_0x186b27){console[_0x3cac47(0x14d)](_0x3cac47(0x1c1),_0x186b27),alert(_0x3cac47(0x26f));}finally{_0x32983c['disabled']=![],_0x32983c['innerHTML']=_0x2374f7;}});let typingTimeout;const messageInput=document[a0_0x89bb7b(0x1c2)]('messageInput');messageInput&&messageInput[a0_0x89bb7b(0x1e0)](a0_0x89bb7b(0x1b7),_0x5a3399=>{const _0x111e0c=a0_0x89bb7b;if(!state[_0x111e0c(0x175)]||!state[_0x111e0c(0x154)])return;state['socket'][_0x111e0c(0x1af)](_0x111e0c(0x1fc),{'conversationId':state[_0x111e0c(0x175)]['_id'],'isTyping':!![]}),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x5ba85f=_0x111e0c;state[_0x5ba85f(0x154)][_0x5ba85f(0x1af)](_0x5ba85f(0x1fc),{'conversationId':state['currentConversation'][_0x5ba85f(0x1c0)],'isTyping':![]});},0x3e8);});function handleTypingIndicator(_0x4e9611,_0x12c8bd,_0x586150,_0x11d438){const _0x1b1afc=a0_0x89bb7b;if(state[_0x1b1afc(0x175)]?.[_0x1b1afc(0x1c0)]!==_0x586150||_0x4e9611===state[_0x1b1afc(0x18f)]['id'])return;const _0x4912e0=document[_0x1b1afc(0x1c2)](_0x1b1afc(0x21c)),_0x30dd20=document[_0x1b1afc(0x1c2)](_0x1b1afc(0x218));if(!_0x4912e0||!_0x30dd20)return;_0x11d438?(_0x30dd20[_0x1b1afc(0x22e)]=_0x12c8bd,_0x4912e0[_0x1b1afc(0x1d1)][_0x1b1afc(0x25d)]='flex'):_0x4912e0[_0x1b1afc(0x1d1)][_0x1b1afc(0x25d)]=_0x1b1afc(0x227);}async function markConversationAsRead(_0x96775d){const _0x4dbc02=a0_0x89bb7b;try{await fetch(API_URL+'/messages/read/'+_0x96775d,{'method':'PATCH','headers':{'Authorization':'Bearer\x20'+state[_0x4dbc02(0x286)]}});const _0x37515f=state['conversations'][_0x4dbc02(0x27d)](_0x59c02f=>_0x59c02f['_id']===_0x96775d);_0x37515f&&_0x37515f[_0x4dbc02(0x157)]&&(_0x37515f[_0x4dbc02(0x157)][state[_0x4dbc02(0x18f)]['id']]=0x0,renderConversations());}catch(_0x21bd20){console[_0x4dbc02(0x14d)](_0x4dbc02(0x26b),_0x21bd20);}}function markMessagesAsRead(_0x321e16,_0x37aa04){const _0x5deb1f=a0_0x89bb7b,_0x43a266=state[_0x5deb1f(0x275)][_0x321e16]||[];_0x43a266[_0x5deb1f(0x271)](_0x471a38=>{const _0x1c02c3=_0x5deb1f;!_0x471a38['readBy'][_0x1c02c3(0x220)](_0x37aa04)&&_0x471a38[_0x1c02c3(0x200)][_0x1c02c3(0x22c)](_0x37aa04);}),state[_0x5deb1f(0x175)]?.[_0x5deb1f(0x1c0)]===_0x321e16&&renderMessages(_0x321e16);}function openNewChatPrivate(){const _0x969945=a0_0x89bb7b;showNewChatModal(),switchNewChatTab(_0x969945(0x17f));}function openNewChatGroup(){const _0x26c589=a0_0x89bb7b;showNewChatModal(),switchNewChatTab(_0x26c589(0x280));}function showNewChatModal(){const _0xd5c472=a0_0x89bb7b,_0x124928=document[_0xd5c472(0x1c2)](_0xd5c472(0x1d8));_0x124928&&(_0x124928['classList']['add'](_0xd5c472(0x1dd)),switchNewChatTab('private'),renderUsersList());}function closeNewChatModal(){const _0x5804b3=a0_0x89bb7b,_0x28fd9e=document[_0x5804b3(0x1c2)](_0x5804b3(0x1d8));if(_0x28fd9e)_0x28fd9e[_0x5804b3(0x24c)][_0x5804b3(0x193)]('active');const _0x994bb5=document[_0x5804b3(0x1c2)](_0x5804b3(0x17b)),_0x4b1c11=document[_0x5804b3(0x1c2)]('searchGroupUsers'),_0x4c68c4=document[_0x5804b3(0x1c2)]('groupName');if(_0x994bb5)_0x994bb5[_0x5804b3(0x179)]='';if(_0x4b1c11)_0x4b1c11[_0x5804b3(0x179)]='';if(_0x4c68c4)_0x4c68c4[_0x5804b3(0x179)]='';}function switchNewChatTab(_0x7b7773){const _0x2bc172=a0_0x89bb7b,_0x2e0312=document['getElementById'](_0x2bc172(0x152)),_0x2fbeef=document['getElementById'](_0x2bc172(0x1a3)),_0x1740bf=document[_0x2bc172(0x1c2)](_0x2bc172(0x16f)),_0x408975=document['getElementById'](_0x2bc172(0x178));if(!_0x2e0312||!_0x2fbeef||!_0x1740bf||!_0x408975)return;_0x7b7773==='private'?(_0x2e0312['classList'][_0x2bc172(0x162)](_0x2bc172(0x1dd)),_0x2fbeef[_0x2bc172(0x24c)][_0x2bc172(0x193)](_0x2bc172(0x1dd)),_0x1740bf['style'][_0x2bc172(0x25d)]=_0x2bc172(0x1cd),_0x408975[_0x2bc172(0x1d1)][_0x2bc172(0x25d)]=_0x2bc172(0x227),renderUsersList()):(_0x2e0312[_0x2bc172(0x24c)][_0x2bc172(0x193)](_0x2bc172(0x1dd)),_0x2fbeef[_0x2bc172(0x24c)]['add'](_0x2bc172(0x1dd)),_0x1740bf['style']['display']='none',_0x408975[_0x2bc172(0x1d1)][_0x2bc172(0x25d)]=_0x2bc172(0x1cd),renderGroupUsersList());}async function loadUsers(){const _0xf47f37=a0_0x89bb7b;try{const _0x167655=await fetch(API_URL+_0xf47f37(0x25b),{'headers':{'Authorization':_0xf47f37(0x21f)+state[_0xf47f37(0x286)]}});if(!_0x167655['ok'])throw new Error(_0xf47f37(0x14e));state['users']=await _0x167655['json']();}catch(_0x5e2d5a){console[_0xf47f37(0x14d)](_0xf47f37(0x257),_0x5e2d5a);}}function renderUsersList(){const _0x6144fa=a0_0x89bb7b,_0x2116a5=document[_0x6144fa(0x1c2)]('usersList');if(!_0x2116a5)return;const _0x2373bb=document[_0x6144fa(0x1c2)](_0x6144fa(0x17b)),_0x540dee=_0x2373bb?_0x2373bb[_0x6144fa(0x179)][_0x6144fa(0x1ca)]():'',_0x4e5afd=state[_0x6144fa(0x26a)]['filter'](_0x1aa709=>_0x1aa709[_0x6144fa(0x158)][_0x6144fa(0x1ca)]()[_0x6144fa(0x220)](_0x540dee));if(_0x4e5afd[_0x6144fa(0x28e)]===0x0){_0x2116a5['innerHTML']=_0x6144fa(0x25a);return;}_0x2116a5['innerHTML']=_0x4e5afd['map'](_0x2fc3d5=>_0x6144fa(0x1b5)+_0x2fc3d5[_0x6144fa(0x1c0)]+_0x6144fa(0x223)+_0x2fc3d5['avatar']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-item-name\x22>'+_0x2fc3d5[_0x6144fa(0x158)]+_0x6144fa(0x205)+(_0x2fc3d5[_0x6144fa(0x1d7)]==='online'?'Online':'Offline')+_0x6144fa(0x1bd))['join']('');}function renderGroupUsersList(){const _0x3a9c23=a0_0x89bb7b,_0xd78c35=document[_0x3a9c23(0x1c2)]('groupUsersList');if(!_0xd78c35)return;const _0x44a4ed=document['getElementById'](_0x3a9c23(0x159)),_0x31a9c2=_0x44a4ed?_0x44a4ed[_0x3a9c23(0x179)]['toLowerCase']():'',_0x86d35=state[_0x3a9c23(0x26a)][_0x3a9c23(0x265)](_0x4d56db=>_0x4d56db['username'][_0x3a9c23(0x1ca)]()['includes'](_0x31a9c2));if(_0x86d35[_0x3a9c23(0x28e)]===0x0){_0xd78c35[_0x3a9c23(0x19d)]=_0x3a9c23(0x25a);return;}_0xd78c35['innerHTML']=_0x86d35[_0x3a9c23(0x222)](_0x424fe3=>'\x0a\x20\x20\x20\x20<div\x20class=\x22user-item\x22\x20onclick=\x22toggleUserSelection(\x27'+_0x424fe3[_0x3a9c23(0x1c0)]+'\x27,\x20this)\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22avatar\x22>'+_0x424fe3[_0x3a9c23(0x22f)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-item-name\x22>'+_0x424fe3[_0x3a9c23(0x158)]+_0x3a9c23(0x205)+(_0x424fe3[_0x3a9c23(0x1d7)]==='online'?_0x3a9c23(0x207):_0x3a9c23(0x182))+'</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x3a9c23(0x24d)]('');}const searchUsersInput=document[a0_0x89bb7b(0x1c2)](a0_0x89bb7b(0x17b)),searchGroupUsersInput=document['getElementById'](a0_0x89bb7b(0x159));searchUsersInput&&searchUsersInput[a0_0x89bb7b(0x1e0)](a0_0x89bb7b(0x1b7),renderUsersList);searchGroupUsersInput&&searchGroupUsersInput[a0_0x89bb7b(0x1e0)](a0_0x89bb7b(0x1b7),renderGroupUsersList);let selectedGroupUsers=[];function toggleUserSelection(_0x380c43,_0x470131){const _0x54d8d5=a0_0x89bb7b,_0x21c14f=selectedGroupUsers[_0x54d8d5(0x208)](_0x380c43);_0x21c14f>-0x1?(selectedGroupUsers[_0x54d8d5(0x21b)](_0x21c14f,0x1),_0x470131[_0x54d8d5(0x24c)][_0x54d8d5(0x193)](_0x54d8d5(0x1f5))):(selectedGroupUsers[_0x54d8d5(0x22c)](_0x380c43),_0x470131['classList']['add'](_0x54d8d5(0x1f5)));}async function startPrivateChat(_0x1c5e34){const _0x52fb82=a0_0x89bb7b;try{const _0x2af4d9=await fetch(API_URL+'/conversations',{'method':_0x52fb82(0x285),'headers':{'Content-Type':_0x52fb82(0x247),'Authorization':_0x52fb82(0x21f)+state[_0x52fb82(0x286)]},'body':JSON[_0x52fb82(0x1b4)]({'type':'private','participants':[_0x1c5e34]})});if(!_0x2af4d9['ok'])throw new Error(_0x52fb82(0x24e));const _0x5e98f9=await _0x2af4d9[_0x52fb82(0x1fa)](),_0x2c1823=state[_0x52fb82(0x1a5)][_0x52fb82(0x27d)](_0x20dabe=>_0x20dabe[_0x52fb82(0x1c0)]===_0x5e98f9[_0x52fb82(0x1c0)]);!_0x2c1823&&(state[_0x52fb82(0x1a5)][_0x52fb82(0x253)](_0x5e98f9),renderConversations()),closeNewChatModal(),openConversation(_0x5e98f9[_0x52fb82(0x1c0)]);}catch(_0x414890){console[_0x52fb82(0x14d)](_0x52fb82(0x1bb),_0x414890),alert(_0x52fb82(0x1ff));}}async function createGroupChat(){const _0x51ce17=a0_0x89bb7b,_0x26732b=document['getElementById'](_0x51ce17(0x1eb));if(!_0x26732b)return;const _0x4182c5=_0x26732b['value'][_0x51ce17(0x229)]();if(!_0x4182c5){alert(_0x51ce17(0x27e));return;}if(selectedGroupUsers[_0x51ce17(0x28e)]===0x0){alert(_0x51ce17(0x259));return;}try{const _0x3a6798=await fetch(API_URL+_0x51ce17(0x1ac),{'method':_0x51ce17(0x285),'headers':{'Content-Type':'application/json','Authorization':_0x51ce17(0x21f)+state['token']},'body':JSON[_0x51ce17(0x1b4)]({'type':_0x51ce17(0x280),'participants':selectedGroupUsers,'name':_0x4182c5})});if(!_0x3a6798['ok'])throw new Error(_0x51ce17(0x1e6));const _0x5584a2=await _0x3a6798[_0x51ce17(0x1fa)]();state['conversations'][_0x51ce17(0x253)](_0x5584a2),renderConversations(),closeNewChatModal(),selectedGroupUsers=[],openConversation(_0x5584a2[_0x51ce17(0x1c0)]);}catch(_0x220366){console[_0x51ce17(0x14d)](_0x51ce17(0x19b),_0x220366),alert(_0x51ce17(0x1c7));}}function toggleChatInfo(){const _0x3db053=a0_0x89bb7b,_0x3305c0=document[_0x3db053(0x1c2)]('chatInfo');if(!_0x3305c0)return;_0x3305c0[_0x3db053(0x24c)]['toggle'](_0x3db053(0x1dd));}function renderParticipants(_0x4b665d){const _0x33dd86=a0_0x89bb7b,_0x169838=document[_0x33dd86(0x1c2)](_0x33dd86(0x23f));if(!_0x169838)return;_0x169838[_0x33dd86(0x19d)]=_0x4b665d[_0x33dd86(0x255)][_0x33dd86(0x222)](_0x1d1c6e=>_0x33dd86(0x16e)+_0x1d1c6e[_0x33dd86(0x22f)]+_0x33dd86(0x24b)+_0x1d1c6e[_0x33dd86(0x158)]+_0x33dd86(0x1ae))[_0x33dd86(0x24d)]('');}document[a0_0x89bb7b(0x1e0)](a0_0x89bb7b(0x1f9),_0x1606f5=>{const _0x1b27b7=a0_0x89bb7b,_0x3d7497=document[_0x1b27b7(0x1c2)](_0x1b27b7(0x18b));if(!_0x3d7497)return;if(_0x3d7497['classList'][_0x1b27b7(0x239)]('active')){const _0x4b6ddf=_0x3d7497[_0x1b27b7(0x239)](_0x1606f5['target']),_0x2b1318=_0x1606f5[_0x1b27b7(0x1e9)][_0x1b27b7(0x1c8)](_0x1b27b7(0x236));!_0x4b6ddf&&!_0x2b1318&&toggleChatInfo(!![]);}});function toggleSettingsModal(){const _0x1c5f46=a0_0x89bb7b,_0x256e51=document[_0x1c5f46(0x1c2)](_0x1c5f46(0x1b1));if(!_0x256e51)return;if(_0x256e51[_0x1c5f46(0x24c)][_0x1c5f46(0x239)]('active'))_0x256e51[_0x1c5f46(0x24c)][_0x1c5f46(0x193)](_0x1c5f46(0x1dd));else{const _0x3d7ef9=document['getElementById'](_0x1c5f46(0x1a1)),_0x32bdb4=document[_0x1c5f46(0x1c2)](_0x1c5f46(0x25c));if(_0x3d7ef9)_0x3d7ef9['textContent']=state[_0x1c5f46(0x18f)][_0x1c5f46(0x158)];if(_0x32bdb4)_0x32bdb4[_0x1c5f46(0x22e)]=state[_0x1c5f46(0x18f)][_0x1c5f46(0x22f)];_0x256e51[_0x1c5f46(0x24c)]['add']('active');}}async function changeTheme(){const _0x4b30b7=a0_0x89bb7b,_0x3996d3=document[_0x4b30b7(0x1c2)](_0x4b30b7(0x17d));if(!_0x3996d3)return;const _0x12de0a=_0x3996d3[_0x4b30b7(0x179)];_0x12de0a===_0x4b30b7(0x183)?document[_0x4b30b7(0x1f3)][_0x4b30b7(0x1f7)](_0x4b30b7(0x1c6),_0x4b30b7(0x183)):document[_0x4b30b7(0x1f3)]['removeAttribute'](_0x4b30b7(0x1c6));try{await fetch(API_URL+_0x4b30b7(0x169),{'method':_0x4b30b7(0x20f),'headers':{'Content-Type':_0x4b30b7(0x247),'Authorization':_0x4b30b7(0x21f)+state['token']},'body':JSON[_0x4b30b7(0x1b4)]({'theme':_0x12de0a})});if(!state[_0x4b30b7(0x18f)][_0x4b30b7(0x238)])state[_0x4b30b7(0x18f)][_0x4b30b7(0x238)]={};state[_0x4b30b7(0x18f)][_0x4b30b7(0x238)][_0x4b30b7(0x15e)]=_0x12de0a,localStorage[_0x4b30b7(0x24a)](_0x4b30b7(0x18f),JSON[_0x4b30b7(0x1b4)](state[_0x4b30b7(0x18f)]));}catch(_0xfa483){console[_0x4b30b7(0x14d)](_0x4b30b7(0x15c),_0xfa483);}}async function toggleNotifications(){const _0xa45b57=a0_0x89bb7b,_0x277f43=document[_0xa45b57(0x1c2)](_0xa45b57(0x165));if(!_0x277f43)return;const _0x4c2d4c=_0x277f43[_0xa45b57(0x1a6)];try{await fetch(API_URL+_0xa45b57(0x169),{'method':_0xa45b57(0x20f),'headers':{'Content-Type':_0xa45b57(0x247),'Authorization':_0xa45b57(0x21f)+state[_0xa45b57(0x286)]},'body':JSON[_0xa45b57(0x1b4)]({'notifications':_0x4c2d4c})});if(!state[_0xa45b57(0x18f)][_0xa45b57(0x238)])state[_0xa45b57(0x18f)][_0xa45b57(0x238)]={};state[_0xa45b57(0x18f)][_0xa45b57(0x238)][_0xa45b57(0x161)]=_0x4c2d4c,localStorage[_0xa45b57(0x24a)](_0xa45b57(0x18f),JSON[_0xa45b57(0x1b4)](state[_0xa45b57(0x18f)]));}catch(_0x593c79){console[_0xa45b57(0x14d)](_0xa45b57(0x1c3),_0x593c79);}}function logout(){const _0x278310=a0_0x89bb7b;state['socket']&&state[_0x278310(0x154)][_0x278310(0x1d9)](),localStorage[_0x278310(0x1a7)](_0x278310(0x286)),localStorage[_0x278310(0x1a7)](_0x278310(0x18f)),state[_0x278310(0x286)]=null,state[_0x278310(0x18f)]=null,state[_0x278310(0x1a5)]=[],state[_0x278310(0x175)]=null,state[_0x278310(0x275)]={},document[_0x278310(0x1c2)]('chatApp')[_0x278310(0x1d1)]['display']=_0x278310(0x227),document[_0x278310(0x1c2)](_0x278310(0x1c5))['style'][_0x278310(0x25d)]='block',toggleSettingsModal();}function updateUserStatus(_0x381e91,_0x28858e,_0x5a82e8){const _0x384ab9=a0_0x89bb7b;state['conversations'][_0x384ab9(0x271)](_0x3bc571=>{const _0x5f4648=_0x384ab9,_0xa56d56=_0x3bc571[_0x5f4648(0x255)][_0x5f4648(0x27d)](_0x59d7a6=>_0x59d7a6[_0x5f4648(0x1c0)]===_0x381e91);if(_0xa56d56){_0xa56d56[_0x5f4648(0x1d7)]=_0x28858e;if(_0x5a82e8)_0xa56d56['lastSeen']=_0x5a82e8;}});const _0x1ed0c4=state[_0x384ab9(0x26a)][_0x384ab9(0x27d)](_0x41f572=>_0x41f572[_0x384ab9(0x1c0)]===_0x381e91);if(_0x1ed0c4){_0x1ed0c4['status']=_0x28858e;if(_0x5a82e8)_0x1ed0c4[_0x384ab9(0x245)]=_0x5a82e8;}if(state['currentConversation']?.['type']==='private'){const _0x156433=state[_0x384ab9(0x175)][_0x384ab9(0x255)][_0x384ab9(0x27d)](_0x3db00a=>_0x3db00a['_id']===_0x381e91);if(_0x156433){const _0x56f233=_0x28858e===_0x384ab9(0x156)?_0x384ab9(0x207):_0x384ab9(0x1f0)+formatTime(_0x5a82e8),_0x4d25a4=document[_0x384ab9(0x1c2)](_0x384ab9(0x24f)),_0x4587e4=document[_0x384ab9(0x1c2)](_0x384ab9(0x26c));if(_0x4d25a4)_0x4d25a4[_0x384ab9(0x22e)]=_0x56f233;if(_0x4587e4)_0x4587e4['textContent']=_0x56f233;}}renderConversations();}function toggleSidebar(){const _0x57a374=a0_0x89bb7b,_0x5149a7=document['getElementById'](_0x57a374(0x230));_0x5149a7&&_0x5149a7[_0x57a374(0x24c)][_0x57a374(0x279)](_0x57a374(0x1fb));}function formatTime(_0x295acb){const _0x30d7aa=a0_0x89bb7b;if(!_0x295acb)return'';const _0xa4933d=new Date(_0x295acb),_0x27e016=new Date(),_0x4a7005=_0x27e016-_0xa4933d;if(_0x4a7005<0xea60)return _0x30d7aa(0x1a0);if(_0x4a7005<0x36ee80){const _0x430d0c=Math['floor'](_0x4a7005/0xea60);return _0x430d0c+_0x30d7aa(0x1ba);}if(_0xa4933d['toDateString']()===_0x27e016[_0x30d7aa(0x1a2)]())return _0xa4933d[_0x30d7aa(0x1ee)](_0x30d7aa(0x199),{'hour':_0x30d7aa(0x174),'minute':'2-digit'});const _0x3af6bf=new Date(_0x27e016);_0x3af6bf[_0x30d7aa(0x190)](_0x3af6bf['getDate']()-0x1);if(_0xa4933d['toDateString']()===_0x3af6bf[_0x30d7aa(0x1a2)]())return _0x30d7aa(0x290);if(_0x4a7005<0x240c8400)return _0xa4933d['toLocaleDateString'](_0x30d7aa(0x199),{'weekday':'short'});return _0xa4933d[_0x30d7aa(0x282)](_0x30d7aa(0x199),{'month':_0x30d7aa(0x1ef),'day':'numeric'});}function escapeHtml(_0x5d5b8f){const _0x12f468=a0_0x89bb7b,_0x417036=document['createElement']('div');return _0x417036[_0x12f468(0x22e)]=_0x5d5b8f,_0x417036['innerHTML'];}const authModal=document[a0_0x89bb7b(0x1c2)]('authModal');authModal&&authModal[a0_0x89bb7b(0x1e0)](a0_0x89bb7b(0x1f9),_0x467607=>{const _0x1dbbd6=a0_0x89bb7b;if(_0x467607[_0x1dbbd6(0x1e9)]['id']==='authModal')closeAuthModal();});const newChatModal=document['getElementById']('newChatModal');function a0_0x5d92(){const _0xf17cee=['\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2040px;\x20height:\x2040px;\x20border:\x204px\x20solid\x20rgba(255,255,255,0.3);\x20border-top-color:\x20white;\x20border-radius:\x2050%;\x20animation:\x20spin\x201s\x20linear\x20infinite;\x20margin-bottom:\x2015px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20id=\x22loadingMessage\x22>','group','[onclick=\x22switchView(\x27','toLocaleDateString','reset','Username\x20must\x20start\x20with\x20a\x20letter\x20or\x20number','POST','token','#0E1116','113537nnhnmK','spinnerAnimation','appendChild','messagesRead','null','<div\x20class=\x22message-sender\x22>','length',';\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Open\x20Settings</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<kbd\x20style=\x22background:\x20','Yesterday','190612aaAoRe','chatAvatar','error','Failed\x20to\x20load\x20users','content','Signing\x20in...','45RUtrDi','privateTab','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22conversation-item\x20','socket','\x20members','online','unreadCount','username','searchGroupUsers','</div>',';\x20padding:\x204px\x208px;\x20border-radius:\x204px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x22>Alt\x20+\x20.</kbd>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x20padding:\x2010px;\x20background:\x20','Error\x20updating\x20theme:','sidebarAvatar','theme','#1e293b','248952gGeKjg','notifications','add',';\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>New\x20Group\x20Chat</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<kbd\x20style=\x22background:\x20','No\x20group\x20chats\x20yet','notificationsToggle','signupTab','Error\x20loading\x20conversations:','div','/users/settings','254274hrtIxv','3939859YpYNtA','https://frankchat-pi4x.onrender.com/api','grid','\x0a\x20\x20\x20\x20<div\x20class=\x22participant-item\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22avatar\x22>','privateChatSection',';\x20padding:\x204px\x208px;\x20border-radius:\x204px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x22>Alt\x20+\x20G</kbd>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x20padding:\x2010px;\x20background:\x20','navAvatar','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-avatar\x22>','querySelectorAll','2-digit','currentConversation','chatApp','isContentEditable','groupChatSection','value','chatsBadge','searchUsers','No\x20unread\x20messages','themeSelect','Unknown','private','Passwords\x20do\x20not\x20match','chatName','Offline','dark','\x0a\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.7);\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20z-index:\x2010000;\x0a\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20','type',';\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Close\x20Modal</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<kbd\x20style=\x22background:\x20','getAttribute','searchConversations','#ffffff','conversationId','chatInfo','userTyping','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20',';\x0a\x20\x20\x20\x20z-index:\x2010001;\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20gap:\x2010px;\x0a\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20font-weight:\x20500;\x0a\x20\x20\x20\x20animation:\x20slideInUp\x200.3s\x20cubic-bezier(0.4,\x200,\x200.2,\x201);\x0a\x20\x20','user','setDate','infoAvatar','shortcutAnimations','remove','loadingMessage','unread',';\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>New\x20Private\x20Chat</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<kbd\x20style=\x22background:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble\x22>','chats','en-US','.loading-conversations','Error\x20creating\x20group:','onclick','innerHTML','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22conversation-time\x22>','profileModal','Just\x20now','settingsUsername','toDateString','groupTab','Signup\x20failed','conversations','checked','removeItem','own','scrollTop','sender','conversationsList','/conversations',';\x0a\x20\x20\x20\x20color:\x20','</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','emit','Connection\x20error.\x20Please\x20try\x20again.','settingsModal','time','test','stringify','\x0a\x20\x20\x20\x20<div\x20class=\x22user-item\x22\x20onclick=\x22startPrivateChat(\x27','DOMContentLoaded','input','slideOutDown\x200.3s\x20cubic-bezier(0.4,\x200,\x200.2,\x201)','authModal','m\x20ago','Error\x20starting\x20chat:','head','</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','ctrlKey',';\x20padding:\x204px\x208px;\x20border-radius:\x204px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x22>/</kbd>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x20padding:\x2010px;\x20background:\x20','_id','Error\x20sending\x20message:','getElementById','Error\x20updating\x20notifications:','currentView','landingPage','data-theme','Failed\x20to\x20create\x20group.\x20Please\x20try\x20again.','closest','Creating\x20account...','toLowerCase','cssText','name','block','@keyframes\x20spin\x20{\x20to\x20{\x20transform:\x20rotate(360deg);\x20}\x20}','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22loading-messages\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20align-items:\x20center;\x20justify-content:\x20center;\x20height:\x20100%;\x20color:\x20var(--text-light);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2040px;\x20height:\x2040px;\x20border:\x203px\x20solid\x20var(--border);\x20border-top-color:\x20var(--primary);\x20border-radius:\x2050%;\x20animation:\x20spin\x201s\x20linear\x20infinite;\x20margin-bottom:\x2015px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Loading\x20messages...</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','#f1f5f9','style','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20messages:','signupForm','innerWidth',';\x20padding:\x204px\x208px;\x20border-radius:\x204px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x22>Alt\x20+\x20?</kbd>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22document.getElementById(\x27shortcuts-help-modal\x27).remove()\x22\x20style=\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2024px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20linear-gradient(135deg,\x20#00c46a,\x20#009b54);\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20600;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20transform\x200.2s\x20ease;\x0a\x20\x20\x20\x20\x20\x20\x22\x20onmouseover=\x22this.style.transform=\x27translateY(-2px)\x27\x22\x20onmouseout=\x22this.style.transform=\x27translateY(0)\x27\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20Got\x20it!\x0a\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','status','newChatModal','disconnect',';\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Show\x20This\x20Help</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<kbd\x20style=\x22background:\x20','altKey','preventDefault','active','\x0a\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-','signupPassword','addEventListener','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22avatar\x22>','disabled','valid',';\x0a\x20\x20\x20\x20padding:\x2012px\x2020px;\x0a\x20\x20\x20\x20border-radius:\x2012px;\x0a\x20\x20\x20\x20box-shadow:\x200\x208px\x2024px\x20rgba(0,0,0,0.3);\x0a\x20\x20\x20\x20border:\x201px\x20solid\x20','Group\x20Chat','Failed\x20to\x20create\x20group','signupError','6MatvJF','target','groupsBadge','groupName','chatContainer','sidebarUsername','toLocaleTimeString','short','Last\x20seen\x20','log','5282456OXJWbM','documentElement','#334155','selected','Escape','setAttribute',';\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Quick\x20Search</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<kbd\x20style=\x22background:\x20','click','json','hidden','typing','#161A20','querySelector','Failed\x20to\x20start\x20conversation.\x20Please\x20try\x20again.','readBy','loginForm','loginUsername','light','\x27)\x22]','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-item-status\x22>','focus','Online','indexOf','messagesContainer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','animation','#E6E9EF','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20style=\x22font-size:\x2016px;\x20color:\x20','#e2e8f0','PATCH','getItem','/auth/login','</div>\x0a\x20\x20\x20\x20','Dark',';\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Toggle\x20Dark/Light\x20Mode</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<kbd\x20style=\x22background:\x20','loadingOverlay','\x22\x20onclick=\x22openConversation(\x27','/messages/','typingUsername',';\x20padding:\x204px\x208px;\x20border-radius:\x204px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x22>Alt\x20+\x20S</kbd>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x20padding:\x2010px;\x20background:\x20','reduce','splice','typingIndicator','groups','metaKey','Bearer\x20','includes','10hfPVZh','map','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22avatar\x22>','lastMessage','flex','#103a24','none','Username\x20must\x20be\x203-20\x20characters','trim','127.0.0.1','<div\x20class=\x22unread-badge\x22>','push','.chat-placeholder','textContent','avatar','sidebar','<div\x20style=\x22padding:\x2020px;\x20text-align:\x20center;\x20color:\x20var(--text-light);\x22>','Username\x20can\x20only\x20contain\x20letters,\x20numbers,\x20underscore,\x20and\x20hyphen','\x20mode\x20activated</span>\x0a\x20\x20\x20\x20<kbd\x20style=\x22\x0a\x20\x20\x20\x20\x20\x20background:\x20','<div\x20style=\x22width:\x2020px;\x20height:\x2020px;\x20border:\x202px\x20solid\x20rgba(255,255,255,0.3);\x20border-top-color:\x20white;\x20border-radius:\x2050%;\x20animation:\x20spin\x201s\x20linear\x20infinite;\x20margin:\x200;\x22></div>','shortcuts-help-modal','.icon-btn','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22conversation-preview\x22>','settings','contains','<div\x20style=\x22padding:\x2020px;\x20text-align:\x20center;\x20color:\x20var(--text-light);\x22>Failed\x20to\x20load\x20messages</div>','#f8fafc','loginError','https://frankchat-pi4x.onrender.com','newConversation','participantsList','hostname','Loading...','Login\x20failed','http://localhost:3000/api','35SXjxub','lastSeen','messageForm','application/json','sendBtn','newMessage','setItem','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22participant-name\x22>','classList','join','Failed\x20to\x20create\x20conversation','chatStatus','submit','login',';\x22></i>\x0a\x20\x20\x20\x20<span>','unshift','loginPassword','participants','Failed\x20to\x20load\x20conversations','Error\x20loading\x20users:','removeAttribute','Please\x20select\x20at\x20least\x20one\x20user','<div\x20style=\x22padding:\x2020px;\x20text-align:\x20center;\x20color:\x20var(--text-light);\x22>No\x20users\x20found</div>','/users','settingsAvatar','display','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','loginTab',';\x20\x0a\x20\x20\x20\x20\x20\x20padding:\x202px\x206px;\x20\x0a\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x20\x0a\x20\x20\x20\x20\x20\x20font-size:\x2011px;\x0a\x20\x20\x20\x20\x20\x20margin-left:\x206px;\x0a\x20\x20\x20\x20\x20\x20font-family:\x20monospace;\x0a\x20\x20\x20\x20\x22>Alt+T</kbd>\x0a\x20\x20','text','\x0a\x20\x20\x20\x20<div\x20style=\x22\x0a\x20\x20\x20\x20\x20\x20background:\x20','<i\x20class=\x22fas\x20fa-check-double\x22></i>','INPUT','filter','scrollHeight','totalChats','key','.mobile-nav-item','users','Error\x20marking\x20as\x20read:','infoStatus','body','theme-notification','Failed\x20to\x20send\x20message.\x20Please\x20try\x20again.','location','forEach','sun','tagName',';\x20padding:\x204px\x208px;\x20border-radius:\x204px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x22>Alt\x20+\x20N</kbd>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x20padding:\x2010px;\x20background:\x20','messages','createElement',';\x20padding:\x204px\x208px;\x20border-radius:\x204px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x22>Alt\x20+\x20T</kbd>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x20padding:\x2010px;\x20background:\x20','/auth/signup','toggle','createdAt','\x0a\x20\x20\x20\x20@keyframes\x20slideInUp\x20{\x0a\x20\x20\x20\x20\x20\x20from\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(100px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20to\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20@keyframes\x20slideOutDown\x20{\x0a\x20\x20\x20\x20\x20\x20from\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20to\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(100px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20@keyframes\x20fadeIn\x20{\x0a\x20\x20\x20\x20\x20\x20from\x20{\x20opacity:\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20to\x20{\x20opacity:\x201;\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20@keyframes\x20scaleIn\x20{\x0a\x20\x20\x20\x20\x20\x20from\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(0.9);\x0a\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20to\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20','53290iacPAT','find','Please\x20enter\x20a\x20group\x20name'];a0_0x5d92=function(){return _0xf17cee;};return a0_0x5d92();}newChatModal&&newChatModal[a0_0x89bb7b(0x1e0)]('click',_0x3e2f12=>{const _0xdb33f9=a0_0x89bb7b;if(_0x3e2f12[_0xdb33f9(0x1e9)]['id']==='newChatModal')closeNewChatModal();});const settingsModal=document['getElementById'](a0_0x89bb7b(0x1b1));settingsModal&&settingsModal[a0_0x89bb7b(0x1e0)](a0_0x89bb7b(0x1f9),_0x214837=>{const _0x376613=a0_0x89bb7b;if(_0x214837[_0x376613(0x1e9)]['id']===_0x376613(0x1b1))toggleSettingsModal();});function switchMobileView(_0x14b70a){const _0x1699cb=a0_0x89bb7b;switchView(_0x14b70a),document[_0x1699cb(0x173)](_0x1699cb(0x269))[_0x1699cb(0x271)](_0x3db848=>{const _0x528914=_0x1699cb;_0x3db848[_0x528914(0x24c)]['remove'](_0x528914(0x1dd));});const _0x46a124=document[_0x1699cb(0x1fe)]('.mobile-nav-item[data-view=\x22'+_0x14b70a+'\x22]');if(_0x46a124)_0x46a124['classList'][_0x1699cb(0x162)]('active');}function closeChatMobile(){const _0x4b34fb=a0_0x89bb7b,_0x18c05b=document[_0x4b34fb(0x1c2)](_0x4b34fb(0x230)),_0xb9366=document['getElementById'](_0x4b34fb(0x1ec)),_0x39c9ef=document[_0x4b34fb(0x1fe)](_0x4b34fb(0x22d));if(_0x18c05b)_0x18c05b[_0x4b34fb(0x24c)][_0x4b34fb(0x193)](_0x4b34fb(0x1fb));if(_0xb9366)_0xb9366[_0x4b34fb(0x1d1)][_0x4b34fb(0x25d)]='none';if(_0x39c9ef)_0x39c9ef[_0x4b34fb(0x1d1)][_0x4b34fb(0x25d)]='flex';state[_0x4b34fb(0x175)]=null;}function showProfileModal(){const _0x216b7c=a0_0x89bb7b,_0x349e61=document[_0x216b7c(0x1c2)](_0x216b7c(0x19f));if(!_0x349e61)return;const _0xa1b32c=document[_0x216b7c(0x1c2)]('profileUsername'),_0x553da5=document['getElementById']('profileAvatar'),_0x144bab=document[_0x216b7c(0x1c2)](_0x216b7c(0x267)),_0x6940a2=document[_0x216b7c(0x1c2)]('totalGroups');if(_0xa1b32c)_0xa1b32c['textContent']=state[_0x216b7c(0x18f)][_0x216b7c(0x158)];if(_0x553da5)_0x553da5[_0x216b7c(0x22e)]=state[_0x216b7c(0x18f)][_0x216b7c(0x22f)];if(_0x144bab){const _0x49b1a0=state[_0x216b7c(0x1a5)]['filter'](_0x214183=>_0x214183[_0x216b7c(0x185)]===_0x216b7c(0x17f))[_0x216b7c(0x28e)];_0x144bab[_0x216b7c(0x22e)]=_0x49b1a0;}if(_0x6940a2){const _0x1c9886=state[_0x216b7c(0x1a5)]['filter'](_0x1faaab=>_0x1faaab[_0x216b7c(0x185)]===_0x216b7c(0x280))[_0x216b7c(0x28e)];_0x6940a2[_0x216b7c(0x22e)]=_0x1c9886;}_0x349e61[_0x216b7c(0x24c)][_0x216b7c(0x162)](_0x216b7c(0x1dd));}function closeProfileModal(){const _0x4320cf=a0_0x89bb7b,_0x66dabe=document[_0x4320cf(0x1c2)](_0x4320cf(0x19f));if(_0x66dabe)_0x66dabe[_0x4320cf(0x24c)]['remove'](_0x4320cf(0x1dd));}const profileModal=document[a0_0x89bb7b(0x1c2)](a0_0x89bb7b(0x19f));profileModal&&profileModal[a0_0x89bb7b(0x1e0)]('click',_0x3b4a3b=>{const _0x390b3a=a0_0x89bb7b;if(_0x3b4a3b[_0x390b3a(0x1e9)]['id']===_0x390b3a(0x19f))closeProfileModal();});document[a0_0x89bb7b(0x1e0)]('keydown',_0x3c08af=>{const _0x260773=a0_0x89bb7b;_0x3c08af[_0x260773(0x1db)]&&_0x3c08af['key']==='t'&&(_0x3c08af['preventDefault'](),toggleThemeShortcut());_0x3c08af[_0x260773(0x1db)]&&_0x3c08af['key']==='n'&&(_0x3c08af[_0x260773(0x1dc)](),openNewChatPrivate());_0x3c08af[_0x260773(0x1db)]&&_0x3c08af['key']==='g'&&(_0x3c08af[_0x260773(0x1dc)](),openNewChatGroup());if(_0x3c08af['altKey']&&_0x3c08af[_0x260773(0x268)]==='s'){_0x3c08af['preventDefault']();const _0x3ab6fe=document[_0x260773(0x1c2)](_0x260773(0x188));if(_0x3ab6fe)_0x3ab6fe[_0x260773(0x206)]();}_0x3c08af[_0x260773(0x1db)]&&_0x3c08af[_0x260773(0x268)]==='.'&&(_0x3c08af['preventDefault'](),state[_0x260773(0x18f)]&&state[_0x260773(0x286)]&&toggleSettingsModal());_0x3c08af[_0x260773(0x1db)]&&_0x3c08af[_0x260773(0x268)]==='?'&&(_0x3c08af['preventDefault'](),showShortcutsHelp());if(_0x3c08af[_0x260773(0x268)]===_0x260773(0x1f6)){const _0x563f5c=document[_0x260773(0x1c2)]('shortcuts-help-modal');if(_0x563f5c){_0x563f5c['remove']();return;}const _0x21b3a7=document[_0x260773(0x1c2)](_0x260773(0x1b9)),_0x132bc5=document[_0x260773(0x1c2)](_0x260773(0x1d8)),_0x1b6c52=document['getElementById'](_0x260773(0x1b1)),_0x511fb8=document['getElementById'](_0x260773(0x18b));if(_0x21b3a7&&_0x21b3a7[_0x260773(0x24c)]['contains'](_0x260773(0x1dd)))closeAuthModal();else{if(_0x132bc5&&_0x132bc5['classList'][_0x260773(0x239)](_0x260773(0x1dd)))closeNewChatModal();else{if(_0x1b6c52&&_0x1b6c52[_0x260773(0x24c)]['contains']('active'))toggleSettingsModal();else _0x511fb8&&_0x511fb8[_0x260773(0x1d1)][_0x260773(0x25d)]==='block'&&toggleChatInfo();}}}if(_0x3c08af[_0x260773(0x268)]==='/'&&!_0x3c08af[_0x260773(0x1be)]&&!_0x3c08af[_0x260773(0x21e)]&&!_0x3c08af['altKey']){const _0x31ccb6=document['activeElement'],_0x31fcf9=_0x31ccb6[_0x260773(0x273)]===_0x260773(0x264)||_0x31ccb6[_0x260773(0x273)]==='TEXTAREA'||_0x31ccb6[_0x260773(0x177)];if(!_0x31fcf9){_0x3c08af[_0x260773(0x1dc)]();const _0x4e355b=document[_0x260773(0x1c2)](_0x260773(0x188));if(_0x4e355b)_0x4e355b[_0x260773(0x206)]();}}});async function toggleThemeShortcut(){const _0x46b16c=a0_0x89bb7b,_0x340eab=document[_0x46b16c(0x1c2)](_0x46b16c(0x17d)),_0x55074f=document['documentElement']['getAttribute'](_0x46b16c(0x1c6)),_0x17f7f4=_0x55074f===_0x46b16c(0x183)?_0x46b16c(0x203):_0x46b16c(0x183);_0x17f7f4===_0x46b16c(0x183)?document[_0x46b16c(0x1f3)][_0x46b16c(0x1f7)](_0x46b16c(0x1c6),_0x46b16c(0x183)):document['documentElement'][_0x46b16c(0x258)](_0x46b16c(0x1c6));_0x340eab&&(_0x340eab['value']=_0x17f7f4);if(state[_0x46b16c(0x286)]&&state[_0x46b16c(0x18f)])try{await fetch(API_URL+_0x46b16c(0x169),{'method':'PATCH','headers':{'Content-Type':_0x46b16c(0x247),'Authorization':'Bearer\x20'+state[_0x46b16c(0x286)]},'body':JSON[_0x46b16c(0x1b4)]({'theme':_0x17f7f4})});if(!state[_0x46b16c(0x18f)][_0x46b16c(0x238)])state[_0x46b16c(0x18f)][_0x46b16c(0x238)]={};state[_0x46b16c(0x18f)][_0x46b16c(0x238)][_0x46b16c(0x15e)]=_0x17f7f4,localStorage[_0x46b16c(0x24a)](_0x46b16c(0x18f),JSON[_0x46b16c(0x1b4)](state[_0x46b16c(0x18f)])),showThemeNotification(_0x17f7f4);}catch(_0x48319c){console['error'](_0x46b16c(0x15c),_0x48319c);}else showThemeNotification(_0x17f7f4);}function showThemeNotification(_0x2b302e){const _0x215c1d=a0_0x89bb7b,_0x4f2aa4=document[_0x215c1d(0x1c2)](_0x215c1d(0x26e));if(_0x4f2aa4)_0x4f2aa4['remove']();const _0x37ff19=document[_0x215c1d(0x276)]('div');_0x37ff19['id']=_0x215c1d(0x26e),_0x37ff19[_0x215c1d(0x1d1)][_0x215c1d(0x1cb)]='\x0a\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20bottom:\x2024px;\x0a\x20\x20\x20\x20right:\x2024px;\x0a\x20\x20\x20\x20background:\x20'+(_0x2b302e==='dark'?_0x215c1d(0x15f):_0x215c1d(0x189))+_0x215c1d(0x1ad)+(_0x2b302e==='dark'?_0x215c1d(0x1d0):_0x215c1d(0x15f))+_0x215c1d(0x1e4)+(_0x2b302e===_0x215c1d(0x183)?_0x215c1d(0x1f4):_0x215c1d(0x20e))+_0x215c1d(0x18e),_0x37ff19[_0x215c1d(0x19d)]=_0x215c1d(0x1de)+(_0x2b302e===_0x215c1d(0x183)?'moon':_0x215c1d(0x272))+_0x215c1d(0x20d)+(_0x2b302e===_0x215c1d(0x183)?'#60a5fa':'#f59e0b')+_0x215c1d(0x252)+(_0x2b302e===_0x215c1d(0x183)?_0x215c1d(0x213):'Light')+_0x215c1d(0x233)+(_0x2b302e==='dark'?_0x215c1d(0x1f4):_0x215c1d(0x1d0))+_0x215c1d(0x260),document[_0x215c1d(0x26d)][_0x215c1d(0x28a)](_0x37ff19),setTimeout(()=>{const _0xab7d16=_0x215c1d;_0x37ff19[_0xab7d16(0x1d1)][_0xab7d16(0x20b)]=_0xab7d16(0x1b8),setTimeout(()=>_0x37ff19['remove'](),0x12c);},0x9c4);}function showShortcutsHelp(){const _0x4a3d03=a0_0x89bb7b,_0x6c17a4=document[_0x4a3d03(0x1c2)]('shortcuts-help-modal');if(_0x6c17a4){_0x6c17a4['remove']();return;}const _0x3f9630=document[_0x4a3d03(0x276)](_0x4a3d03(0x168));_0x3f9630['id']=_0x4a3d03(0x235),_0x3f9630[_0x4a3d03(0x1d1)][_0x4a3d03(0x1cb)]='\x0a\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.7);\x0a\x20\x20\x20\x20backdrop-filter:\x20blur(4px);\x0a\x20\x20\x20\x20z-index:\x2010002;\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20animation:\x20fadeIn\x200.2s\x20ease;\x0a\x20\x20';const _0x140e9c=document[_0x4a3d03(0x1f3)][_0x4a3d03(0x187)](_0x4a3d03(0x1c6)),_0x12f901=_0x140e9c===_0x4a3d03(0x183);_0x3f9630['innerHTML']=_0x4a3d03(0x262)+(_0x12f901?_0x4a3d03(0x1fd):'#ffffff')+';\x0a\x20\x20\x20\x20\x20\x20color:\x20'+(_0x12f901?_0x4a3d03(0x20c):_0x4a3d03(0x226))+';\x0a\x20\x20\x20\x20\x20\x20border-radius:\x2016px;\x0a\x20\x20\x20\x20\x20\x20padding:\x2032px;\x0a\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20box-shadow:\x200\x2020px\x2060px\x20rgba(0,0,0,0.4);\x0a\x20\x20\x20\x20\x20\x20animation:\x20scaleIn\x200.3s\x20cubic-bezier(0.34,\x201.56,\x200.64,\x201);\x0a\x20\x20\x20\x20\x22>\x0a\x20\x20\x20\x20\x20\x20<h2\x20style=\x22margin:\x200\x200\x2024px;\x20font-size:\x2024px;\x20font-weight:\x20700;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20⌨️\x20Keyboard\x20Shortcuts\x0a\x20\x20\x20\x20\x20\x20</h2>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x20padding:\x2010px;\x20background:\x20'+(_0x12f901?_0x4a3d03(0x287):_0x4a3d03(0x23b))+_0x4a3d03(0x214)+(_0x12f901?_0x4a3d03(0x1fd):_0x4a3d03(0x20e))+_0x4a3d03(0x277)+(_0x12f901?_0x4a3d03(0x287):_0x4a3d03(0x23b))+_0x4a3d03(0x196)+(_0x12f901?_0x4a3d03(0x1fd):'#e2e8f0')+_0x4a3d03(0x274)+(_0x12f901?'#0E1116':_0x4a3d03(0x23b))+_0x4a3d03(0x163)+(_0x12f901?'#161A20':_0x4a3d03(0x20e))+_0x4a3d03(0x170)+(_0x12f901?_0x4a3d03(0x287):_0x4a3d03(0x23b))+';\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Focus\x20Search</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<kbd\x20style=\x22background:\x20'+(_0x12f901?'#161A20':'#e2e8f0')+_0x4a3d03(0x219)+(_0x12f901?'#0E1116':_0x4a3d03(0x23b))+_0x4a3d03(0x1f8)+(_0x12f901?'#161A20':_0x4a3d03(0x20e))+_0x4a3d03(0x1bf)+(_0x12f901?_0x4a3d03(0x287):_0x4a3d03(0x23b))+_0x4a3d03(0x28f)+(_0x12f901?'#161A20':_0x4a3d03(0x20e))+_0x4a3d03(0x15b)+(_0x12f901?_0x4a3d03(0x287):_0x4a3d03(0x23b))+_0x4a3d03(0x186)+(_0x12f901?_0x4a3d03(0x1fd):_0x4a3d03(0x20e))+';\x20padding:\x204px\x208px;\x20border-radius:\x204px;\x20font-family:\x20monospace;\x20font-size:\x2012px;\x22>Esc</kbd>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x20padding:\x2010px;\x20background:\x20'+(_0x12f901?_0x4a3d03(0x287):_0x4a3d03(0x23b))+_0x4a3d03(0x1da)+(_0x12f901?_0x4a3d03(0x1fd):_0x4a3d03(0x20e))+_0x4a3d03(0x1d6),_0x3f9630[_0x4a3d03(0x19c)]=_0x11bf22=>{const _0x16bd94=_0x4a3d03;if(_0x11bf22[_0x16bd94(0x1e9)]===_0x3f9630)_0x3f9630[_0x16bd94(0x193)]();},document[_0x4a3d03(0x26d)][_0x4a3d03(0x28a)](_0x3f9630);}if(!document[a0_0x89bb7b(0x1c2)](a0_0x89bb7b(0x192))){const style=document[a0_0x89bb7b(0x276)](a0_0x89bb7b(0x1d1));style['id']=a0_0x89bb7b(0x192),style[a0_0x89bb7b(0x22e)]=a0_0x89bb7b(0x27b),document['head']['appendChild'](style);}